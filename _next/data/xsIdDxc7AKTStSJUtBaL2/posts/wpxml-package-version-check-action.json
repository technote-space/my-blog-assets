{"pageProps":{"post":{"id":"wpxml-package-version-check-action","title":"npmパッケージ公開時にpackage.jsonのバージョンが正しいかチェックするGitHub Actions","content":"<html><head></head><body><div class=\"toc-wrapper\"><input type=\"checkbox\" class=\"toc-checkbox\" id=\"toc-checkbox-osi7e1evo5\" checked><label class=\"toc-title\" for=\"toc-checkbox-osi7e1evo5\">目次</label><nav class=\"toc\"><ol class=\"toc-level toc-level-1\"><li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#概要\">概要</a></li><li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#package-version-check-action\">Package Version Check Action</a><ol class=\"toc-level toc-level-2\"><li class=\"toc-item toc-item-h3\"><a class=\"toc-link toc-link-h3\" href=\"#プッシュ時に使用する場合\">プッシュ時に使用する場合</a></li><li class=\"toc-item toc-item-h3\"><a class=\"toc-link toc-link-h3\" href=\"#リリースのフローで使用する場合\">リリースのフローで使用する場合</a></li></ol></li><li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#オプション\">オプション</a><ol class=\"toc-level toc-level-2\"><li class=\"toc-item toc-item-h3\"><a class=\"toc-link toc-link-h3\" href=\"#branch_prefix\">BRANCH_PREFIX</a></li><li class=\"toc-item toc-item-h3\"><a class=\"toc-link toc-link-h3\" href=\"#commit_disabled\">COMMIT_DISABLED</a></li></ol></li><li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#補足\">補足</a><ol class=\"toc-level toc-level-2\"><li class=\"toc-item toc-item-h3\"><a class=\"toc-link toc-link-h3\" href=\"#personal-access-token\">Personal access token</a></li><li class=\"toc-item toc-item-h3\"><a class=\"toc-link toc-link-h3\" href=\"#タグ\">タグ</a></li></ol></li><li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#実際に使用しているリポジトリの例\">実際に使用しているリポジトリの例</a></li></ol></nav></div><h2 id=\"概要\">概要<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#概要\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h2>\n\n<p>想定しているフロー</p>\n\n<ol><li>default branch からリリース用ブランチを作成（例：release/v1.2.3）</li><li>機能追加用ブランチ（例：feature/#123）やバグ修正用ブランチ（例：fix/#321）を切って開発し、完了後リリース用ブランチにマージ</li><li>リリース用ブランチでdefault branchへのプルリクを作成</li><li>プルリクをマージ</li><li>タグを作成（例：v1.2.3）</li><li>タグの作成で起動したGitHub Actionsなどで自動publish</li></ol>\n\n<p>普段個人のリポジトリで行っているフローですが、publishの前に<span class=\"double-underline\">package.jsonのバージョンを上げるのを忘れてpublishに失敗</span>することが何度かありました。</p>\n\n<p>その場合、タグを貼り直したりpackage.jsonのバージョンを更新してコミットし直したりといった作業が発生してしまいます。</p>\n\n<p>ブランチ名やタグ名をpublishに合わせて命名しているので、それを利用してpackage.jsonのバージョンを更新するGitHub Actionsを作成しました。</p>\n\n<h2 id=\"package-version-check-action\">Package Version Check Action<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#package-version-check-action\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h2>\n\n<div class=\"blog-card\"><iframe src=\"https://blog-card-ten.vercel.app/card/https%3A%2F%2Fgithub.com%2Ftechnote-space%2Fpackage-version-check-action?id=blog-card-ffkt0lq7t5&#x26;referrer=https%3A%2F%2Ftechnote.space%2Fposts%2Fwpxml-package-version-check-action%2F\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" data-id=\"blog-card-ffkt0lq7t5\"></iframe></div>\n\n<h3 id=\"プッシュ時に使用する場合\">プッシュ時に使用する場合<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#プッシュ時に使用する場合\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h3>\n\n<p>release/v1.2.3 のようにブランチ名にリリース予定のバージョンを含むフローの場合、以下の設定でpackage.jsonのバージョンが自動更新されます。</p>\n\n<p>例：<code>.github/workflows/check_version.yml </code></p>\n\n<pre class=\"language-yaml\" style=\"background: #2e3440\"><code class=\"language-yaml\"><span style=\"color: #81A1C1\">on</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #A3BE8C\">push</span>\n<span style=\"color: #8FBCBB\">name</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #A3BE8C\">Check package version</span>\n<span style=\"color: #8FBCBB\">jobs</span><span style=\"color: #ECEFF4\">:</span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #8FBCBB\">checkVersion</span><span style=\"color: #ECEFF4\">:</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #8FBCBB\">name</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #A3BE8C\">Check package version</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #8FBCBB\">runs-on</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #A3BE8C\">ubuntu-latest</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #8FBCBB\">steps</span><span style=\"color: #ECEFF4\">:</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #ECEFF4\">- </span><span style=\"color: #8FBCBB\">uses</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #A3BE8C\">actions/checkout@v1</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #8FBCBB\">with</span><span style=\"color: #ECEFF4\">:</span>\n<span style=\"color: #D8DEE9FF\">          </span><span style=\"color: #8FBCBB\">fetch-depth</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">3</span>\n\n<span style=\"color: #ECEFF4\">      </span><span style=\"color: #4C566A\"># Use this GitHub Action</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #ECEFF4\">- </span><span style=\"color: #8FBCBB\">name</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #A3BE8C\">Check package version</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #8FBCBB\">uses</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #A3BE8C\">technote-space/package-version-check-action@v1</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #8FBCBB\">with</span><span style=\"color: #ECEFF4\">:</span>\n<span style=\"color: #D8DEE9FF\">          </span><span style=\"color: #8FBCBB\">GITHUB_TOKEN</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #A3BE8C\">${{ secrets.GITHUB_TOKEN }}</span>\n<span style=\"color: #D8DEE9FF\">          </span><span style=\"color: #8FBCBB\">BRANCH_PREFIX</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #A3BE8C\">release/</span></code></pre>\n\n<h3 id=\"リリースのフローで使用する場合\">リリースのフローで使用する場合<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#リリースのフローで使用する場合\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h3>\n\n<p>タグのプッシュやタグの作成時にpublishを行うワークフローがすでにある場合、以下のように追記することでバージョンの自動更新を利用できます。</p>\n\n<p>例：<code>.github/workflows/release.yml</code></p>\n\n<pre class=\"language-yaml\" style=\"background: #2e3440\"><code class=\"language-yaml\"><span style=\"color: #81A1C1\">on</span><span style=\"color: #ECEFF4\">:</span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #8FBCBB\">push</span><span style=\"color: #ECEFF4\">:</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #8FBCBB\">tags</span><span style=\"color: #ECEFF4\">:</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #ECEFF4\">- </span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #A3BE8C\">v*</span><span style=\"color: #ECEFF4\">'</span>\n<span style=\"color: #8FBCBB\">name</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #A3BE8C\">Publish Package</span>\n<span style=\"color: #8FBCBB\">jobs</span><span style=\"color: #ECEFF4\">:</span>\n<span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #8FBCBB\">release</span><span style=\"color: #ECEFF4\">:</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #8FBCBB\">name</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #A3BE8C\">Publish Package</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #8FBCBB\">runs-on</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #A3BE8C\">ubuntu-latest</span>\n<span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #8FBCBB\">steps</span><span style=\"color: #ECEFF4\">:</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #ECEFF4\">- </span><span style=\"color: #8FBCBB\">name</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #A3BE8C\">Checkout</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #8FBCBB\">uses</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #A3BE8C\">actions/checkout@master</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #8FBCBB\">with</span><span style=\"color: #ECEFF4\">:</span>\n<span style=\"color: #D8DEE9FF\">          </span><span style=\"color: #8FBCBB\">fetch-depth</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">3</span>\n\n<span style=\"color: #ECEFF4\">      </span><span style=\"color: #4C566A\"># Use this GitHub Action</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #ECEFF4\">- </span><span style=\"color: #8FBCBB\">name</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #A3BE8C\">Check package version</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #8FBCBB\">uses</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #A3BE8C\">technote-space/package-version-check-action@v1</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #8FBCBB\">with</span><span style=\"color: #ECEFF4\">:</span>\n<span style=\"color: #D8DEE9FF\">          </span><span style=\"color: #8FBCBB\">GITHUB_TOKEN</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #A3BE8C\">${{ secrets.GITHUB_TOKEN }}</span>\n\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #ECEFF4\">- </span><span style=\"color: #8FBCBB\">name</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #A3BE8C\">Install Package dependencies</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #8FBCBB\">run</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #A3BE8C\">yarn install</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #ECEFF4\">- </span><span style=\"color: #8FBCBB\">name</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #A3BE8C\">Build</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #8FBCBB\">run</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #A3BE8C\">yarn build</span>\n<span style=\"color: #D8DEE9FF\">      </span><span style=\"color: #ECEFF4\">- </span><span style=\"color: #8FBCBB\">name</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #A3BE8C\">Publish</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #8FBCBB\">uses</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #A3BE8C\">actions/npm@master</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #8FBCBB\">env</span><span style=\"color: #ECEFF4\">:</span>\n<span style=\"color: #D8DEE9FF\">          </span><span style=\"color: #8FBCBB\">NPM_AUTH_TOKEN</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #A3BE8C\">${{ secrets.NPM_AUTH_TOKEN }}</span>\n<span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #8FBCBB\">with</span><span style=\"color: #ECEFF4\">:</span>\n<span style=\"color: #D8DEE9FF\">          </span><span style=\"color: #8FBCBB\">args</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #A3BE8C\">publish</span></code></pre>\n\n<h2 id=\"オプション\">オプション<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#オプション\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h2>\n\n<h3 id=\"branch_prefix\">BRANCH_PREFIX<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#branch_prefix\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h3>\n\n<p>ブランチのリプフィックス</p>\n\n<p>上の挙げた例では<code>release/</code> が指定されており、その場合 release/v1.2.3 のようなブランチが対象になります。</p>\n\n<h3 id=\"commit_disabled\"><a href=\"https://github.com/technote-space/package-version-check-action/blob/master/README.ja.md#commit_disabled\"></a>COMMIT_DISABLED<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#commit_disabled\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h3>\n\n<p>コミットが無効かどうか</p>\n\n<p>リリースフローで使用する場合、バージョンが更新されたpackage.jsonがあればpublishは成功するため、コミットを行わなくても動作します。</p>\n\n<p>このオプションに1を設定するとコミットを行いません。</p>\n\n<h2 id=\"補足\">補足<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#補足\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h2>\n\n<h3 id=\"personal-access-token\">Personal access token<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#personal-access-token\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h3>\n\n<p>GitHub Actionsで提供されるトークン GITHUB_TOKEN は連続するイベントを作成する権限がありません。</p>\n\n<p>したがってこのアクションによるコミット（プッシュ）ではプッシュイベントは発生しないため、プッシュをトリガーとしたCIなどは実行されません。</p>\n\n<p>ブランチプロテクションでCIの結果を利用する設定している場合、このアクションによるコミットが最後の変更だとチェックが通りません。</p>\n\n<p>アクションをトリガーする場合は Personal access token を生成して GITHUB_TOKEN の代わりに使用する必要があります。</p>\n\n<div class=\"blog-card\"><iframe src=\"https://blog-card-ten.vercel.app/card/https%3A%2F%2Fgithub.com%2Ftechnote-space%2Fpackage-version-check-action%2Fblob%2Fmaster%2FREADME.ja.md%23%25E3%2582%25B3%25E3%2583%259F%25E3%2583%2583%25E3%2583%2588?id=blog-card-ijrfp16ede&#x26;referrer=https%3A%2F%2Ftechnote.space%2Fposts%2Fwpxml-package-version-check-action%2F\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" data-id=\"blog-card-ijrfp16ede\"></iframe></div>\n\n<h3 id=\"タグ\">タグ<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#タグ\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h3>\n\n<p>タグ名は <a href=\"https://semver.org/\" target=\"_blank\" rel=\"noreferrer noopener\">Semantic Versioning</a> に従っている必要があります。 </p>\n\n<h2 id=\"実際に使用しているリポジトリの例\">実際に使用しているリポジトリの例<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#実際に使用しているリポジトリの例\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h2>\n\n<div class=\"blog-card\"><iframe src=\"https://blog-card-ten.vercel.app/card/https%3A%2F%2Fgithub.com%2Ftechnote-space%2Fpackage-version-check-action%2Fblob%2Fmaster%2FREADME.ja.md%23%25E3%2581%2593%25E3%2581%25AE%25E3%2582%25A2%25E3%2582%25AF%25E3%2582%25B7%25E3%2583%25A7%25E3%2583%25B3%25E3%2582%2592%25E4%25BD%25BF%25E7%2594%25A8%25E3%2581%2597%25E3%2581%25A6%25E3%2581%2584%25E3%2582%258B%25E3%2583%25AA%25E3%2583%259D%25E3%2582%25B8%25E3%2583%2588%25E3%2583%25AA%25E3%2581%25AE%25E4%25BE%258B?id=blog-card-9ovq2hj7mq&#x26;referrer=https%3A%2F%2Ftechnote.space%2Fposts%2Fwpxml-package-version-check-action%2F\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" data-id=\"blog-card-9ovq2hj7mq\"></iframe></div>\n<!-- /wp:paragraph --></body></html>","excerpt":"概要 想定しているフロー 1. default branch からリリース用ブランチを作成（例：release/v1.2.3）  2. 機能追加用ブランチ（例：feature/#123）やバグ修正用ブランチ（例：fix/#321）を切って開...","postType":"post","tags":[{"slug":"github-actions","name":"GitHub Actions"},{"slug":"npm","name":"npm"},{"slug":"typescript","name":"typescript"}],"thumbnail":"https://technote.space/uploads/2019/08/github-actions.png","dominantColor":"rgba(169,134,123,0.6666666666666666)","createdAt":"2019-10-09T16:05:48.000Z","updatedAt":null},"prev":{"id":"wpxml-toc-generator","title":"READMEの目次の生成を自動化するGitHub Actions","excerpt":"READMEなどの目次を自動生成する GitHub Actions です。 導入手順   目次の位置を指定する  目次を入れたいマークダウンファイル内に以下のようなコメントを追加します。  例：   WORKFLOWを設定  例：   オプ...","postType":"post","tags":[{"slug":"github-actions","name":"GitHub Actions"},{"slug":"toc","name":"toc"},{"slug":"typescript","name":"typescript"}],"thumbnail":"https://technote.space/uploads/2019/08/github-actions.png","createdAt":"2020-01-08T13:36:43.000Z","updatedAt":null},"next":{"id":"wpxml-github-actions-improve-output","title":"GitHub Actions のログを見やすくする","excerpt":"や でログに出力できますが、特定のフォーマットで出力することでログが見やすくなります。 フォーマット WARNING  警告メッセージを表示する際に使用します。     ERROR  エラーメッセージを表示する際に使用します。     DE...","postType":"post","tags":[{"slug":"github-actions","name":"GitHub Actions"}],"thumbnail":"https://technote.space/uploads/2019/08/github-actions.png","createdAt":"2019-09-24T08:29:04.000Z","updatedAt":null},"headerPages":[],"footerPages":[{"label":"About","url":"/pages/wpxml-about/"},{"label":"プライバシーポリシー","url":"/pages/wpxml-privacy-policy/"},{"label":"お問い合わせ","url":"/pages/wpxml-contact/"}]},"__N_SSG":true}