{"pageProps":{"post":{"id":"wpxml-composer-scripts","title":"composerのscriptsで作業効率化","content":"<html><head></head><body><div class=\"toc-wrapper\"><input type=\"checkbox\" class=\"toc-checkbox\" id=\"toc-checkbox-pktkucklcl\" checked><label class=\"toc-title\" for=\"toc-checkbox-pktkucklcl\">目次</label><nav class=\"toc\"><ol class=\"toc-level toc-level-1\"><li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#コマンドを短縮する\">コマンドを短縮する</a></li><li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#複数のコマンドをまとめる\">複数のコマンドをまとめる</a></li><li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#定義したコマンドを確認する\">定義したコマンドを確認する</a></li><li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#定義したコマンドに説明を追加する\">定義したコマンドに説明を追加する</a></li><li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#その他\">その他</a><ol class=\"toc-level toc-level-2\"><li class=\"toc-item toc-item-h3\"><a class=\"toc-link toc-link-h3\" href=\"#コマンドイベント\">コマンドイベント</a></li><li class=\"toc-item toc-item-h3\"><a class=\"toc-link toc-link-h3\" href=\"#if-で分岐\">if で分岐</a></li></ol></li></ol></nav></div><h2 id=\"コマンドを短縮する\">コマンドを短縮する<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#コマンドを短縮する\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h2>\n\n<p>いくつかのオプションを付けたコマンドを定義することでコマンドを短縮できます。</p>\n\n<p>例：</p>\n\n<pre class=\"wp-block-code\" style=\"background: #2e3440\"><code style=\"color: undefined\">\"scripts\": {\n    \"phpcs\": [\n        \"phpcs --standard=./phpcs.xml\"\n    ],\n    \"phpmd\": [\n        \"phpmd ./app/,./config,./database/factories,./database/seeds,./routes/,./tests/ text phpmd.xml\"\n    ],\n}</code></pre>\n\n<p>定義したコマンドは composer + コマンド名 で実行できます。</p>\n\n<pre class=\"wp-block-code\" style=\"background: #2e3440\"><code style=\"color: undefined\">composer phpmd</code></pre>\n\n<h2 id=\"複数のコマンドをまとめる\">複数のコマンドをまとめる<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#複数のコマンドをまとめる\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h2>\n\n<p>複数のコマンドをまとめて一つのコマンドにすることが可能です。</p>\n\n<p>例：</p>\n\n<pre class=\"wp-block-code\" style=\"background: #2e3440\"><code style=\"color: undefined\">\"scripts\": {\n    \"ncu\": [\n        \"ncu -u\",\n        \"yarn --audit install\",\n    ],\n    \"ide\": [\n        \"php artisan ide-helper:generate --ansi\",\n        \"php artisan ide-helper:models --write --ansi\",\n        \"php artisan ide-helper:meta --ansi\"\n    ],\n}</code></pre>\n\n<p>定義したコマンドを @ + コマンド名で再利用できます。</p>\n\n<p>例：</p>\n\n<pre class=\"wp-block-code\" style=\"background: #2e3440\"><code style=\"color: undefined\">\"scripts\": {\n    \"lint\": [\n        \"@phpcs\",\n        \"@phpmd\",\n    ],\n    \"phpcs\": [\n        \"phpcs --standard=./phpcs.xml\"\n    ],\n    \"phpmd\": [\n        \"phpmd ./app/,./config,./database/factories,./database/seeds,./routes/,./tests/ text phpmd.xml\"\n    ],\n}</code></pre>\n\n<pre class=\"wp-block-code\" style=\"background: #2e3440\"><code style=\"color: undefined\">composer lint</code></pre>\n\n<h2 id=\"定義したコマンドを確認する\">定義したコマンドを確認する<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#定義したコマンドを確認する\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h2>\n\n<pre class=\"wp-block-code\" style=\"background: #2e3440\"><code style=\"color: undefined\">composer list</code></pre>\n\n<h2 id=\"定義したコマンドに説明を追加する\">定義したコマンドに説明を追加する<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#定義したコマンドに説明を追加する\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h2>\n\n<p>scripts-descriptions で <em>composer list</em> で表示される説明を変更できます。</p>\n\n<pre class=\"wp-block-code\" style=\"background: #2e3440\"><code style=\"color: undefined\">\"scripts-descriptions\": {\n    \"lint\": \"Lint!!\"\n}</code></pre>\n\n<h2 id=\"その他\">その他<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#その他\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h2>\n\n<h3 id=\"コマンドイベント\">コマンドイベント<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#コマンドイベント\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h3>\n\n<p>install や update の後などに動作させるスクリプトを定義できます。</p>\n\n<div class=\"blog-card\"><iframe src=\"https://blog-card-ten.vercel.app/card/https%3A%2F%2Fgetcomposer.org%2Fdoc%2Farticles%2Fscripts.md%23event-names?id=blog-card-l7bk0b7ars&#x26;referrer=https%3A%2F%2Ftechnote.space%2Fposts%2Fwpxml-composer-scripts%2F\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" data-id=\"blog-card-l7bk0b7ars\"></iframe></div>\n\n<h3 id=\"if-で分岐\">if で分岐<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#if-で分岐\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h3>\n\n<p>ただのシェルスクリプトなので if で分岐させることもできます。</p>\n\n<p>例えばコマンドが使用できるときだけ動作させるみたいなことができます。</p>\n\n<pre class=\"wp-block-code\" style=\"background: #2e3440\"><code style=\"color: undefined\">\"scripts\": {\n    \"post-update-cmd\": [\n        \"if [[ -n $(php artisan list --raw | grep 'ide-helper:generate') ]] &#x26;&#x26; [[ -f .env ]]; then composer ide; fi\",\n    ],\n    \"ide\": [\n        \"php artisan ide-helper:generate --ansi\",\n        \"php artisan ide-helper:models --write --ansi\",\n        \"php artisan ide-helper:meta --ansi\"\n    ],\n}</code></pre>\n<!-- /wp:code --></body></html>","excerpt":"コマンドを短縮する いくつかのオプションを付けたコマンドを定義することでコマンドを短縮できます。 例：  定義したコマンドは composer + コマンド名 で実行できます。   複数のコマンドをまとめる  複数のコマンドをまとめて一つの...","postType":"post","tags":[{"slug":"composer","name":"composer"}],"thumbnail":"https://technote.space/uploads/2019/08/logo-composer-transparent.png","dominantColor":"rgba(149,136,121,0.5333333333333333)","createdAt":"2019-08-20T08:08:07.000Z","updatedAt":null},"prev":{"id":"wpxml-use-github-actions","title":"GitHub Actions で作業を効率化","excerpt":"最近CI/CDサービスが標準サポートされると発表されたGitHub Actionsですが、いろいろ試してわかった注意点などをまとめておきます。 色々試したリポジトリ 参考リンク       試したアクション   GITHUB PROJECT...","postType":"post","tags":[{"slug":"github","name":"GitHub"},{"slug":"github-actions","name":"GitHub Actions"}],"thumbnail":"https://technote.space/uploads/2019/08/github-actions.png","createdAt":"2019-09-07T20:30:44.000Z","updatedAt":null},"next":{"id":"wpxml-add-component-to-blockeditor","title":"【Gutenberg】ブロックエディタに任意の要素を追加する","excerpt":"基本はREACT ブロックエディタは React なので、ブロックエディタの持っている情報などを利用するには React を使用したほうがよいです。 コンポーネントを作成  通常通りにコンポーネントを作成します。  data.select ...","postType":"post","tags":[{"slug":"gutenberg","name":"Gutenberg"}],"thumbnail":"https://technote.space/uploads/2018/12/banner-772x250.jpg","createdAt":"2019-08-19T08:59:36.000Z","updatedAt":null},"headerPages":[],"footerPages":[]},"__N_SSG":true}