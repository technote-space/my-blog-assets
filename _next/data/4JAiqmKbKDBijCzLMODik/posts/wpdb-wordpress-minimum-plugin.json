{"pageProps":{"post":{"id":"wpxml-wordpress-minimum-plugin","title":"WordPressのプラグインを自分で開発してみる","content":"<html><head></head><body><div class=\"toc-wrapper\"><input type=\"checkbox\" class=\"toc-checkbox\" id=\"toc-checkbox-f5iev97623\" checked><label class=\"toc-title\" for=\"toc-checkbox-f5iev97623\">目次</label><nav class=\"toc\"><ol class=\"toc-level toc-level-1\"><li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#前提条件\">前提条件</a></li><li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#最小構成のプラグイン\">最小構成のプラグイン</a><ol class=\"toc-level toc-level-2\"><li class=\"toc-item toc-item-h3\"><a class=\"toc-link toc-link-h3\" href=\"#プラグインの名前を決める\">プラグインの名前を決める</a></li><li class=\"toc-item toc-item-h3\"><a class=\"toc-link toc-link-h3\" href=\"#プラグインのファイル名を決める\">プラグインのファイル名を決める</a></li><li class=\"toc-item toc-item-h3\"><a class=\"toc-link toc-link-h3\" href=\"#プラグインファイルを作成する\">プラグインファイルを作成する</a></li><li class=\"toc-item toc-item-h3\"><a class=\"toc-link toc-link-h3\" href=\"#プラグインを有効化\">プラグインを有効化</a></li></ol></li><li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#情報を追加する\">情報を追加する</a></li><li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#まとめ\">まとめ</a></li></ol></nav></div>WordPressを運用しているなら必ずと言ってもいいほどお世話になるプラグイン。<br /><br />お問い合わせフォームからSEO対策、サイトマップ生成やサイトの高速化まで様々なプラグインがあります。<br /><br />何かWordPressに欲しい機能があった場合、ネットで探せばだいたいプラグインが見つかるでしょう。<br /><br />ただ、サイト独自の何かを実現したい場合は見つからないこともあると思います。<br /><br />そんな時あなたはどうしますか？<br /><br />最近はクラウドソーシングで依頼することも簡単にできます。<br /><br />（<a href=\"https://www.lancers.jp/profile/technote\" rel=\"noreferrer noopener\" target=\"_blank\">こちら</a>からご依頼は承っております）<br /><br />しかし意外に思うかもしれませんが<span class=\"double-underline\">WordPressのプラグインは意外と簡単に作ることができます</span>。<br /><br />必要な機能を自分でどんどん追加できたらうれしくないですか？<br /><br />どんな機能が欲しいか<span class=\"double-underline\">開発者に説明する必要もない</span>し<span class=\"double-underline\">外注費もかからない</span>。<br /><br />（開発には時間がかかりますが。。。）<br /><br />いずれにせよちょっとした機能を追加できるようにしておいて損はないと思います。<br /><br />ここではWordPressにプラグインとして認識してもらえる最低限必要な作業を説明します。<br /><h2 id=\"前提条件\">前提条件<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#前提条件\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h2><br />簡単とは言ったもののある程度の知識は必要です。<br /><br />少なくとも以下の二つは必須です。<br /><br />「WordPressの開発環境を整えることが可能」<br /><br />「PHPやHTMLをある程度扱うことが可能」<br /><br />ただ、最近はWordPressの開発環境の構築が簡単にできるので、PHPやHTMLの知識があれば問題ありません。<br /><br /><div class=\"blog-card\"><iframe src=\"https://blog-card-ten.vercel.app/card/https%3A%2F%2Fnelog.jp%2Flocal-by-flywheel?id=blog-card-rov2r27vu5&#x26;referrer=https%3A%2F%2Ftechnote.space%2Fposts%2Fwpxml-wordpress-minimum-plugin%2F\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" data-id=\"blog-card-rov2r27vu5\"></iframe></div><br /><h2 id=\"最小構成のプラグイン\">最小構成のプラグイン<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#最小構成のプラグイン\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h2><br />プラグインで最低限必要な作業は、<br /><ol><br /> \t<li><span class=\"double-underline\">プラグインの名前を決める</span></li><br /> \t<li><span class=\"double-underline\">プラグインのファイル名を決める</span></li><br /> \t<li><span class=\"double-underline\">プラグインファイルを作成する</span></li><br /></ol><br />です。<br /><h3 id=\"プラグインの名前を決める\">プラグインの名前を決める<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#プラグインの名前を決める\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h3><br />作成する機能に合った名前を決めます。<br /><br />日本語文字列は使用できません。<br /><br />英数字や空白を使用してください。<br /><br />例えば検索機能であれば「Search」、天気に関するものであれば「Weather」などの単語を含む名称にします。<br /><br />ただ自分のサイト用にいろいろな機能をつけたいだけであれば適当に「My」などでよいでしょう。<br /><br />今回は「My」として話を進めます。<br /><h3 id=\"プラグインのファイル名を決める\">プラグインのファイル名を決める<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#プラグインのファイル名を決める\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h3><br />プラグインの名前からファイル名を決めます。<br /><br />単純にプラグイン名をケバブケースにしたものでもよいでしょう。<br /><div class=\"information-box\">ケバブケースとは単語間をハイフンでつなげたものです。<br />「Test Plugin」の場合「test-plugin」のようになります。<br />参照：https://wa3.i-3-i.info/word16380.html</div><br />将来的に公開する予定がある場合は<br /><br /><div class=\"blog-card\"><iframe src=\"https://blog-card-ten.vercel.app/card/https%3A%2F%2Fja.wordpress.org%2Fplugins%2F?id=blog-card-cem853dm13&#x26;referrer=https%3A%2F%2Ftechnote.space%2Fposts%2Fwpxml-wordpress-minimum-plugin%2F\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" data-id=\"blog-card-cem853dm13\"></iframe></div>[ファイル名]<br /><br />でプラグインページにならないこと（プラグインの検索結果ページに飛ぶこと）を確認しておく必要があります。<br /><br />今回はプラグイン名が「My」なのでファイル名は「my」とします。<br /><h3 id=\"プラグインファイルを作成する\">プラグインファイルを作成する<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#プラグインファイルを作成する\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h3><br />プラグインは以下の場所にあります。<br /><br />「【WordPressをインストールしたフォルダ】\\wp-content\\plugins」<br /><br /><a href=\"https://technote.space/uploads/2018/10/201810071419.png\"><img class=\"alignnone size-medium wp-image-391\" src=\"https://technote.space/uploads/2018/10/201810071419-300x269.png\" alt=\"\" width=\"300\" height=\"269\"></a><br /><br />ここに先ほど決めたファイル名のPHPファイルを作成します。<br /><br />例：my.php<br /><pre>&#x3C;?php<br />/*<br />Plugin Name: My<br />*/</pre><br />以上で最小構成のプラグインは完成です。<br /><br />ほかのプラグインはディレクトリ構成になっていますが、最低限必要なのはこのプラグインファイルだけなので今回はplugins直下にそのままPHPファイルを作成しています。<br /><h3 id=\"プラグインを有効化\">プラグインを有効化<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#プラグインを有効化\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h3><br />プラグイン一覧ページに「My」が追加されているはずです。<br /><br /><a href=\"https://technote.space/uploads/2018/10/201810071505.png\"><img class=\"alignnone size-medium wp-image-393\" src=\"https://technote.space/uploads/2018/10/201810071505-300x137.png\" alt=\"\" width=\"300\" height=\"137\"></a><br /><br />有効化を押してみましょう。<br /><br /><a href=\"https://technote.space/uploads/2018/10/201810071625.png\" target=\"_blank\" rel=\"noreferrer noopener\"><img class=\"alignnone size-medium wp-image-395\" src=\"https://technote.space/uploads/2018/10/201810071625-300x170.png\" alt=\"\" width=\"300\" height=\"170\"></a>　 <a href=\"https://technote.space/uploads/2018/10/201810071626.png\"><img class=\"alignnone size-medium wp-image-396\" src=\"https://technote.space/uploads/2018/10/201810071626-300x136.png\" alt=\"\" width=\"300\" height=\"136\"></a><br /><br />何も機能を実装していないので特に何も起きませんが、プラグインとして認識されていることが確認できました。<br /><h2 id=\"情報を追加する\">情報を追加する<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#情報を追加する\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h2><br />プラグイン一覧の他のプラグインを比べると情報が少ないことに気づくと思います。<br /><ul><br /> \t<li>プラグインの説明</li><br /> \t<li>バージョン情報</li><br /> \t<li>作成者</li><br /></ul><br />これらの情報は先ほど作成したPHPファイルを編集することで追加することができます。<br /><br />公式マニュアルの情報を参考に追加してみます。<br /><blockquote><br /><pre>&#x3C;?php<br />/*<br />Plugin Name: (プラグインの名前)<br />Plugin URI: (プラグインの説明と更新を示すページの URI)<br />Description: (プラグインの短い説明)<br />Version: (プラグインのバージョン番号。例: 1.0)<br />Author: (プラグイン作者の名前)<br />Author URI: (プラグイン作者の URI)<br />License: (ライセンス名の「スラッグ」 例: GPL2)<br />*/</pre><br /><div class=\"blog-card\"><iframe src=\"https://blog-card-ten.vercel.app/card/https%3A%2F%2Fwpdocs.osdn.jp%2F?id=blog-card-e7f9q2b6rs&#x26;referrer=https%3A%2F%2Ftechnote.space%2Fposts%2Fwpxml-wordpress-minimum-plugin%2F\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" data-id=\"blog-card-e7f9q2b6rs\"></iframe></div>プラグインの作成</blockquote><br />Plugin URIはとりあえず無視します。<br /><pre>&#x3C;?php<br />/*<br />Plugin Name: My<br />Description: 自分用プラグイン<br />Version: 1.0<br />Author: technote<br />Author URI: undefined<br />License: GPL2<br />*/</pre><br /><a href=\"https://technote.space/uploads/2018/10/201810071635.png\"><img class=\"alignnone size-medium wp-image-398\" src=\"https://technote.space/uploads/2018/10/201810071635-300x29.png\" alt=\"\" width=\"300\" height=\"29\"></a><br /><br />ちゃんとしたプラグインっぽくなりました。<br /><h2 id=\"まとめ\">まとめ<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#まとめ\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h2><br />WordPressにプラグインとして認識されるまでを解説しました。<br /><br />ただ何も機能を実装していないのでこのままでは意味がありません。<br /><br />機能を実装するには<span class=\"bold\">「アクション」</span>と<span class=\"bold\">「フィルタ」</span>の概念を理解する必要があります。<br /><br />これについては次回説明します。</body></html>","excerpt":"WordPressを運用しているなら必ずと言ってもいいほどお世話になるプラグイン。 お問い合わせフォームからSEO対策、サイトマップ生成やサイトの高速化まで様々なプラグインがあります。 何かWordPressに欲しい機能があった場合、ネット...","postType":"post","tags":[{"slug":"wordpress","name":"WordPress"},{"slug":"%e3%83%97%e3%83%a9%e3%82%b0%e3%82%a4%e3%83%b3","name":"プラグイン"},{"slug":"%e9%96%8b%e7%99%ba","name":"開発"}],"thumbnail":"https://technote.space/uploads/2018/07/WordPress-logotype-wmark.png","dominantColor":"rgba(50,55,60,0.18823529411764706)","createdAt":"2018-10-07T07:43:18.000Z","updatedAt":null},"prev":null,"next":{"id":"markdown-2022-08-13-makefile-change-command-dynamically","title":"Makefile で 動的にコマンドを変える方法","excerpt":"概要 使用できるコマンドかどうかチェックして、使用できない場合は別のコマンドを使用するみたいなことをやりたかったので  例えば、docker-compose がインストールされている場合はそれを使用、それ以外の場合は docker comp...","postType":"post","tags":[{"slug":"makefile","name":"makefile"}],"thumbnail":null,"createdAt":"2022-08-12T15:00:00.000Z","updatedAt":"2022-08-12T15:00:00.000Z"},"headerPages":[],"footerPages":[{"label":"About","url":"/pages/wpxml-about/"},{"label":"プライバシーポリシー","url":"/pages/wpxml-privacy-policy/"},{"label":"お問い合わせ","url":"/pages/wpxml-contact/"}]},"__N_SSG":true}