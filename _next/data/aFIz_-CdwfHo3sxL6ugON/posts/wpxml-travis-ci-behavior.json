{"pageProps":{"post":{"id":"wpxml-travis-ci-behavior","title":"Travis CI の挙動まとめ","content":"<html><head></head><body><div class=\"toc-wrapper\"><input type=\"checkbox\" class=\"toc-checkbox\" id=\"toc-checkbox-n8rbhqgbsm\" checked><label class=\"toc-title\" for=\"toc-checkbox-n8rbhqgbsm\">目次</label><nav class=\"toc\"><ol class=\"toc-level toc-level-1\"><li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#deployprovider--releases-で既にリリース済みに対してデプロイを行った場合\">deploy.provider = releases で既にリリース済みに対してデプロイを行った場合</a></li><li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#deployprovider--script-の場合の-script-に-source-を使用\">deploy.provider = script の場合の script に source を使用</a><ol class=\"toc-level toc-level-2\"><li class=\"toc-item toc-item-h3\"><a class=\"toc-link toc-link-h3\" href=\"#結果\">結果</a></li></ol></li><li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#deploy-に-on-を使わない\">deploy に on を使わない</a><ol class=\"toc-level toc-level-2\"><li class=\"toc-item toc-item-h3\"><a class=\"toc-link toc-link-h3\" href=\"#結果-1\">結果</a></li></ol></li><li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#タグプッシュ時の-travis_commit_range\">タグプッシュ時の ${TRAVIS_COMMIT_RANGE}</a></li><li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#deployprovider--releases-で改行を含む-body-を指定する\">deploy.provider = releases で改行を含む body を指定する</a></li><li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#branchesonly-に-master-を設定\">branches.only に master を設定</a></li><li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#暗号化\">暗号化</a></li><li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#管理画面で登録した環境変数をトークンに使用\">管理画面で登録した環境変数をトークンに使用</a></li><li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#push\">Push</a></li></ol></nav></div><p>引っかかった点などのまとめ</p>\n\n<h2 id=\"deployprovider--releases-で既にリリース済みに対してデプロイを行った場合\">deploy.provider = releases で既にリリース済みに対してデプロイを行った場合<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#deployprovider--releases-で既にリリース済みに対してデプロイを行った場合\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h2>\n\n<p><em>deploy.overwrite = true</em> を設定しておくことで上書きしてくれます。</p>\n\n<p>Travis CI からのデプロイが完了する前に GitHub 上から手動 または GitHub Actions などで作成されていても問題ありません。</p>\n\n<h2 id=\"deployprovider--script-の場合の-script-に-source-を使用\">deploy.provider = script の場合の script に source を使用<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#deployprovider--script-の場合の-script-に-source-を使用\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h2>\n\n<p>環境変数を読みこんでからスクリプトを実行したかったので以下のように記述</p>\n\n<pre class=\"language-sh\" style=\"background: #2e3440\"><code class=\"language-sh\"><span style=\"color: #D8DEE9FF\">script: </span><span style=\"color: #88C0D0\">source</span><span style=\"color: #D8DEE9FF\"> env.sh </span><span style=\"color: #81A1C1\">&#x26;&#x26;</span><span style=\"color: #D8DEE9FF\"> bash deploy.sh</span></code></pre>\n\n<h3 id=\"結果\">結果<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#結果\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h3>\n\n<pre class=\"language-bash\" style=\"background: #2e3440\"><code class=\"language-bash\"><span style=\"color: #D8DEE9FF\">Deploying application</span>\n<span style=\"color: #D8DEE9FF\">sh: 1: source: not found</span></code></pre>\n\n<p>source コマンドが見つからないようです。</p>\n\n<p>before_deploy で source するように修正したら動きました。</p>\n\n<h2 id=\"deploy-に-on-を使わない\">deploy に on を使わない<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#deploy-に-on-を使わない\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h2>\n\n<pre class=\"wp-block-code\" style=\"background: #2e3440\"><code style=\"color: undefined\">jobs:\n  include:\n    (省略)\n\n    - stage: deploy\n      (省略)\n      deploy:\n        provider: script\n        script: deploy.sh\n#        on:\n#          tags: true</code></pre>\n\n<p>stages のほうでステージの実行条件としてタグがある場合としていたため、ジョブのほうの指定は不要かと思いコメントアウトしました。</p>\n\n<h3 id=\"結果-1\">結果<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#結果-1\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h3>\n\n<pre class=\"wp-block-code\" style=\"background: #2e3440\"><code style=\"color: undefined\">Skipping a deployment with the script provider because this branch is not permitted: (タグ名)</code></pre>\n\n<p>on を戻したら動作しました。</p>\n\n<h2 id=\"タグプッシュ時の-travis_commit_range\">タグプッシュ時の ${TRAVIS_COMMIT_RANGE}<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#タグプッシュ時の-travis_commit_range\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h2>\n\n<p>タグプッシュ時にリリース内容を取得するために使用を試みました。</p>\n\n<p>通常のマージでは</p>\n\n<pre class=\"wp-block-code\" style=\"background: #2e3440\"><code style=\"color: undefined\">変更開始コミットハッシュ...変更終了コミットハッシュ</code></pre>\n\n<p>のようなものが取得でき、<em>git log</em> などと併せて使用することでコミット一覧を作成することができますが、タグプッシュ時はこの環境変数は利用できませんでした。</p>\n\n<p>最終的に不要になりましたが、もし必要な場合は git の情報や GitHub API などから取得する必要があります。</p>\n\n<h2 id=\"deployprovider--releases-で改行を含む-body-を指定する\">deploy.provider = releases で改行を含む body を指定する<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#deployprovider--releases-で改行を含む-body-を指定する\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h2>\n\n<p>provider: releases の body に改行を含む複雑な文章を指定することはできないようです。</p>\n\n<pre class=\"wp-block-code\" style=\"background: #2e3440\"><code style=\"color: undefined\">invalid option \"--body=## What’s Changed\\n* e277808 fix: commit message\"</code></pre>\n\n<p>エスケープ処理っぽいことをしてみたりもしましたが無理でした。</p>\n\n<div class=\"blog-card\"><iframe src=\"https://blog-card-ten.vercel.app/card/https%3A%2F%2Fgithub.com%2Ftravis-ci%2Fdpl%2Fissues%2F155?id=blog-card-me2ik9db8p&#x26;referrer=https%3A%2F%2Ftechnote.space%2Fposts%2Fwpxml-travis-ci-behavior%2F\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" data-id=\"blog-card-me2ik9db8p\"></iframe></div>\n\n<p>改行を br に置き換えて使用することで回避できるようです。</p>\n\n<div class=\"blog-card\"><iframe src=\"https://blog-card-ten.vercel.app/card/https%3A%2F%2Fguseyn.com%2Fposts%2Ftravis-control-quality?id=blog-card-lim0i44jgb&#x26;referrer=https%3A%2F%2Ftechnote.space%2Fposts%2Fwpxml-travis-ci-behavior%2F\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" data-id=\"blog-card-lim0i44jgb\"></iframe></div>\n\n<p>または別のツールを使用する選択肢もあります。</p>\n\n<div class=\"blog-card\"><iframe src=\"https://blog-card-ten.vercel.app/card/https%3A%2F%2Fgithub.com%2Flindell%2Fgithub-release-cli?id=blog-card-ig7agocg6s&#x26;referrer=https%3A%2F%2Ftechnote.space%2Fposts%2Fwpxml-travis-ci-behavior%2F\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" data-id=\"blog-card-ig7agocg6s\"></iframe></div>\n\n<p>私は将来的に GitHub Actions でリリースの本文を生成する予定なので、Travis CIからのデプロイではファイルの作成を行うだけにとどめることにしました。</p>\n\n<h2 id=\"branchesonly-に-master-を設定\">branches.only に master を設定<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#branchesonly-に-master-を設定\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h2>\n\n<p>master だけだとタグのプッシュには反応しません。</p>\n\n<p>例えば v1.2.3 のようなタグ付けをする場合、正規表現で指定することで動作しました。</p>\n\n<pre class=\"wp-block-code\" style=\"background: #2e3440\"><code style=\"color: undefined\">\"/^v[0-9\\\\.]+/\"</code></pre>\n\n<h2 id=\"暗号化\">暗号化<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#暗号化\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h2>\n\n<p>秘密にしておく必要のあるトークンなどは <em>travis encrypt</em> で暗号化します。</p>\n\n<div class=\"blog-card\"><iframe src=\"https://blog-card-ten.vercel.app/card/https%3A%2F%2Fdocs.travis-ci.com%2Fuser%2Fencryption-keys%2F?id=blog-card-u2en1nd9ab&#x26;referrer=https%3A%2F%2Ftechnote.space%2Fposts%2Fwpxml-travis-ci-behavior%2F\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" data-id=\"blog-card-u2en1nd9ab\"></iframe></div>\n\n<p>travis-ci.com で使用する場合は <em>--com</em> をつける必要があります。</p>\n\n<p>またリポジトリが正しく認識されている必要があり、明示的に指定する場合は <em>-r</em> を使用します。</p>\n\n<pre class=\"language-bash\" style=\"background: #2e3440\"><code class=\"language-bash\"><span style=\"color: #D8DEE9FF\">travis encrypt --com -r </span><span style=\"color: #81A1C1\">&#x3C;</span><span style=\"color: #D8DEE9FF\">owner</span><span style=\"color: #81A1C1\">></span><span style=\"color: #D8DEE9FF\">/</span><span style=\"color: #81A1C1\">&#x3C;</span><span style=\"color: #D8DEE9FF\">repo</span><span style=\"color: #81A1C1\">></span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">\"</span><span style=\"color: #A3BE8C\">test</span><span style=\"color: #ECEFF4\">\"</span></code></pre>\n\n<h2 id=\"管理画面で登録した環境変数をトークンに使用\">管理画面で登録した環境変数をトークンに使用<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#管理画面で登録した環境変数をトークンに使用\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h2>\n\n<p>Slack のトークンは暗号化を行って</p>\n\n<pre class=\"wp-block-code\" style=\"background: #2e3440\"><code style=\"color: undefined\">notifications:\n  email: false\n  slack:\n    secure: &#x3C;encryped token></code></pre>\n\n<p>のように使用します。</p>\n\n<p>暗号化が面倒だったので、管理画面の設定から登録できる環境変数として <em>SLACK_TOKEN</em> を登録し、</p>\n\n<pre class=\"wp-block-code\" style=\"background: #2e3440\"><code style=\"color: undefined\">notifications:\n  email: false\n  slack:\n    secure: ${SLACK_TOKEN}</code></pre>\n\n<p>として使用することを試しましたが、通知されませんでした。</p>\n\n<p>おとなしく暗号化したものを使用すれば通知されます。</p>\n\n<h2 id=\"push\">Push<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#push\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h2>\n\n<p>Travis CI の Cron によって自動更新して、変更をGitHubにプッシュすることも可能です。</p>\n\n<p>検索で上位に出てきたページを参考に設定しましたが、認証がうまくいきませんでした。</p>\n\n<div class=\"blog-card\"><iframe src=\"https://blog-card-ten.vercel.app/card/https%3A%2F%2Fwww.tam-tam.co.jp%2Ftipsnote%2Fprogram%2Fpost11795.html?id=blog-card-ojlo8tio58&#x26;referrer=https%3A%2F%2Ftechnote.space%2Fposts%2Fwpxml-travis-ci-behavior%2F\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" data-id=\"blog-card-ojlo8tio58\"></iframe></div>\n\n<p>次に参考にした記事では https から git に設定を変えていたので同じように変更してみたところ上手く通りました。</p>\n\n<div class=\"blog-card\"><iframe src=\"https://blog-card-ten.vercel.app/card/https%3A%2F%2Fqiita.com%2FTakuyaHara%2Fitems%2Faf5bbc0f590ca897350c?id=blog-card-sodj51t3fu&#x26;referrer=https%3A%2F%2Ftechnote.space%2Fposts%2Fwpxml-travis-ci-behavior%2F\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" data-id=\"blog-card-sodj51t3fu\"></iframe></div>\n\n<p>前のページでは Travis CI が clone してきたのとは別に clone してからそれに対して push しており、その clone の際には確かにプロトコルが https ではなく git になっています。</p>\n\n<p>https の場合は username と password が求められ、そこで自動化がうまくいかないようなので、before_install などで git プロトコルを使用するようにするとよさそうです。</p>\n\n<pre class=\"wp-block-code\" style=\"background: #2e3440\"><code style=\"color: undefined\">git config --global url.\"git@github.com:\".insteadOf \"https://github.com/\"</code></pre>\n<!-- /wp:code --></body></html>","excerpt":"引っかかった点などのまとめ DEPLOY.PROVIDER = RELEASES で既にリリース済みに対してデプロイを行った場合 deploy.overwrite = true を設定しておくことで上書きしてくれます。  Travis CI...","postType":"post","tags":[{"slug":"travis-ci","name":"Travis CI"}],"thumbnail":"https://technote.space/uploads/2019/06/TravisCI-Full-Color.png","dominantColor":"rgba(137,121,101,0.3176470588235294)","createdAt":"2019-06-23T17:22:57.000Z","updatedAt":null},"prev":{"id":"wpxml-travis-ci-use-build-stages","title":"Travis CI でビルドステージを使用する","excerpt":"ビルドステージとは、ジョブをグループ化し、ステージ内のジョブが終わってから次のステージに進むようなビルドを行うための仕組みです。 動作確認用のリポジトリ     基本的な使用方法   ステージの順番定義  stages に定義したものが上か...","postType":"post","thumbnail":"https://technote.space/uploads/2019/06/TravisCI-Full-Color.png","createdAt":"2019-06-24T13:55:41.000Z","updatedAt":null},"next":{"id":"wpxml-travis-ci-env","title":"Travis CI の環境変数の出力例","excerpt":"使用可能な環境変数はこちらのページにあります。 ただ、どのような情報が入っているかがあまりわからなかったため、実際に動かして確認してみました。 動作確認用のリポジトリ    masterへのマージとタブプッシュ時のみを対象としています。  ...","postType":"post","thumbnail":"https://technote.space/uploads/2019/06/TravisCI-Full-Color.png","createdAt":"2019-06-23T12:53:43.000Z","updatedAt":null},"headerPages":[],"footerPages":[{"label":"About","url":"/pages/wpxml-about/"},{"label":"プライバシーポリシー","url":"/pages/wpxml-privacy-policy/"},{"label":"お問い合わせ","url":"/pages/wpxml-contact/"}]},"__N_SSG":true}