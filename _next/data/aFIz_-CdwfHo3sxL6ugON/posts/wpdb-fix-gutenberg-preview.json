{"pageProps":{"post":{"id":"wpxml-fix-gutenberg-preview","title":"【Gutenberg】公開済みの記事のプレビューの変更が反映されない場合の対処方法","content":"<html><head></head><body><div class=\"toc-wrapper\"><input type=\"checkbox\" class=\"toc-checkbox\" id=\"toc-checkbox-85f5snfag3\" checked><label class=\"toc-title\" for=\"toc-checkbox-85f5snfag3\">目次</label><nav class=\"toc\"><ol class=\"toc-level toc-level-1\"><li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#解決方法\">解決方法</a></li><li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#原因\">原因</a><ol class=\"toc-level toc-level-2\"><li class=\"toc-item toc-item-h3\"><a class=\"toc-link toc-link-h3\" href=\"#プレビュー用のリビジョンの削除される原因\">プレビュー用のリビジョンの削除される原因</a></li><li class=\"toc-item toc-item-h3\"><a class=\"toc-link toc-link-h3\" href=\"#post_modified_gmt-の比較が正しくない原因\">post_modified_gmt の比較が正しくない原因</a></li></ol></li><li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#解決方法１\">解決方法１</a></li><li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#一部テーマやプラグインに関して\">一部テーマやプラグインに関して</a></li><li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#解決方法２\">解決方法２</a></li><li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#201949-追記\">2019/4/9 追記</a></li><li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#2019417-追記\">2019/4/17 追記</a></li><li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#201958-追記\">2019/5/8 追記</a></li><li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#201967-追記\">2019/6/7 追記</a></li></ol></nav></div><p><span class=\"double-underline\">メタボックス を使用している場合</span> かつ <span class=\"double-underline\">公開後の投稿の場合</span>、変更した内容がプレビューで反映されない場合があります。</p>\n\n<p>すでにIssueとして挙がっているので今後本体側で修正される可能性が高いですが、それまでは自分で修正する必要があります。</p>\n\n<div class=\"blog-card\"><iframe src=\"https://blog-card-ten.vercel.app/card/https%3A%2F%2Fgithub.com%2FWordPress%2Fgutenberg%2Fissues%2F12617?id=blog-card-hak83gd6c7&#x26;referrer=https%3A%2F%2Ftechnote.space%2Fposts%2Fwpxml-fix-gutenberg-preview%2F\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" data-id=\"blog-card-hak83gd6c7\"></iframe></div>\n\n<h2 id=\"解決方法\">解決方法<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#解決方法\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h2>\n\n<p>子テーマの <em>functions.php</em> などにコードを追加します。</p>\n\n<p>PHP の修正なので注意が必要です。</p>\n\n<pre class=\"language-php\" style=\"background: #2e3440\"><code class=\"language-php\"><span style=\"color: #D8DEE9FF\">add_filter( 'wp_insert_post_data', function ( $data ) {</span>\n<span style=\"color: #D8DEE9FF\">\tif ( isset( $_GET['meta-box-loader'] ) ) {</span>\n<span style=\"color: #D8DEE9FF\">\t\tunset( $data[\"post_modified\"] );</span>\n<span style=\"color: #D8DEE9FF\">\t\tunset( $data[\"post_modified_gmt\"] );</span>\n<span style=\"color: #D8DEE9FF\">\t}</span>\n\n<span style=\"color: #D8DEE9FF\">\treturn $data;</span>\n<span style=\"color: #D8DEE9FF\">} );</span></code></pre>\n\n<h2 id=\"原因\">原因<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#原因\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h2>\n\n<p>プレビュー用のリビジョンの削除されることが直接の原因です。</p>\n\n<h3 id=\"プレビュー用のリビジョンの削除される原因\">プレビュー用のリビジョンの削除される原因<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#プレビュー用のリビジョンの削除される原因\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h3>\n\n<p><em>wp-admin/edit-form-blocks.php </em>の以下の個所で <em>post_modified_gmt</em> の比較が想定された動作になっていないため、プレビュー用のリビジョンが消されてしまいます。</p>\n\n<pre class=\"language-php\" style=\"background: #2e3440\"><code class=\"language-php\"><span style=\"color: #D8DEE9FF\">$autosave = wp_get_post_autosave( $post_ID );</span>\n<span style=\"color: #D8DEE9FF\">if ( $autosave ) {</span>\n<span style=\"color: #D8DEE9FF\">\tif ( mysql2date( 'U', $autosave->post_modified_gmt, false ) > mysql2date( 'U', $post->post_modified_gmt, false ) ) {</span>\n<span style=\"color: #D8DEE9FF\">\t\t$editor_settings['autosave'] = array(</span>\n<span style=\"color: #D8DEE9FF\">\t\t\t'editLink' => get_edit_post_link( $autosave->ID ),</span>\n<span style=\"color: #D8DEE9FF\">\t\t);</span>\n<span style=\"color: #D8DEE9FF\">\t} else {</span>\n<span style=\"color: #D8DEE9FF\">\t\twp_delete_post_revision( $autosave->ID );</span>\n<span style=\"color: #D8DEE9FF\">\t}</span>\n<span style=\"color: #D8DEE9FF\">}</span></code></pre>\n\n<h3 id=\"post_modified_gmt-の比較が正しくない原因\">post_modified_gmt の比較が正しくない原因<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#post_modified_gmt-の比較が正しくない原因\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h3>\n\n<p>投稿の保存は『記事の内容の保存』と『メタボックスの保存』に分かれています。</p>\n\n<p>プレビューの時には『記事の内容の保存』の時にプレビュー用のリビジョンが作成されます。</p>\n\n<p>そして『記事の内容の保存』が終わった後に『メタボックスの保存』が行われます。</p>\n\n<p>この『メタボックスの保存』の時に元の記事が更新されるため、プレビュー用のリビジョンよりも元の記事のほうが <em>post_modified_gmt</em>  が新しくなります。</p>\n\n<p>したがって</p>\n\n<pre class=\"language-php\" style=\"background: #2e3440\"><code class=\"language-php\"><span style=\"color: #D8DEE9FF\">mysql2date( 'U', $autosave->post_modified_gmt, false ) > mysql2date( 'U', $post->post_modified_gmt, false )</span></code></pre>\n\n<p>による比較は false になり</p>\n\n<pre class=\"language-php\" style=\"background: #2e3440\"><code class=\"language-php\"><span style=\"color: #D8DEE9FF\">wp_delete_post_revision( $autosave->ID )</span></code></pre>\n\n<p>が実行されます。</p>\n\n<h2 id=\"解決方法１\">解決方法１<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#解決方法１\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h2>\n\n<p><span class=\"double-underline\">『メタボックスの保存』の時に元の記事の </span><em><span class=\"double-underline\">post_modified_gmt</span></em><span class=\"double-underline\">  を更新しない</span>ようにすればプレビュー用のリビジョンが消されることはありません。</p>\n\n<p>『メタボックスの保存』の時は <em>$_GET['meta-box-loader']</em> が 1 になります。</p>\n\n<div class=\"blog-card\"><iframe src=\"https://blog-card-ten.vercel.app/card/https%3A%2F%2Fwordpress.org%2Fgutenberg%2Fhandbook%2Fdesigners-developers%2Fdevelopers%2Fbackward-compatibility%2Fmeta-box%2F%23metaboxarea-component?id=blog-card-9mln0nvh7u&#x26;referrer=https%3A%2F%2Ftechnote.space%2Fposts%2Fwpxml-fix-gutenberg-preview%2F\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" data-id=\"blog-card-9mln0nvh7u\"></iframe></div>\n\n<p>この <em>meta-box-loader</em> による判定が行われている <em>use_block_editor_for_post</em> に合わせて <em>isset( $_GET['meta-box-loader'] )</em> が true の場合に『メタボックスの保存』が実行中であると判定することにします。</p>\n\n<p>また保存する値は <em>wp_insert_post_parent </em>フィルタで変更できます。</p>\n\n<p>以上のことから前述の以下のコードで解決できることがわかります。</p>\n\n<pre class=\"language-php\" style=\"background: #2e3440\"><code class=\"language-php\"><span style=\"color: #D8DEE9FF\">add_filter( 'wp_insert_post_data', function ( $data ) {</span>\n<span style=\"color: #D8DEE9FF\">\tif ( isset( $_GET['meta-box-loader'] ) ) {</span>\n<span style=\"color: #D8DEE9FF\">\t\tunset( $data[\"post_modified\"] );</span>\n<span style=\"color: #D8DEE9FF\">\t\tunset( $data[\"post_modified_gmt\"] );</span>\n<span style=\"color: #D8DEE9FF\">\t}</span>\n\n<span style=\"color: #D8DEE9FF\">\treturn $data;</span>\n<span style=\"color: #D8DEE9FF\">} );</span></code></pre>\n\n<p><em>post_modified</em> は判定に使用されていませんが、<em>post_modified_gmt</em> に合わせて更新しないようにしています。</p>\n\n<h2 id=\"一部テーマやプラグインに関して\">一部テーマやプラグインに関して<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#一部テーマやプラグインに関して\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h2>\n\n<p>更新日時を変更しなかったり自由に変更できるようにしたりするメタボックスを追加するテーマやプラグインを導入している場合は、上記対応では正しく動かない場合があります。</p>\n\n<p>さらに具体的には『記事の内容の保存』の時に更新日時を変更せず、『メタボックスの保存』の時にメタボックスから送信される値で更新日時を変更するような動作の場合です。</p>\n\n<p>そのようなテーマやプラグインは大抵の場合オートセーブが考慮されていないため、プレビュー用のリビジョンも元の記事も更新日時が変更されなくなってしまいます。</p>\n\n<h2 id=\"解決方法２\">解決方法２<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#解決方法２\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h2>\n\n<p><span class=\"double-underline\">『メタボックスの保存』の時にプレビュ用のリビジョンの更新日時を必ず元の記事よりも未来に設定する</span>ようにすれば解決します。</p>\n\n<pre class=\"language-php\" style=\"background: #2e3440\"><code class=\"language-php\"><span style=\"color: #D8DEE9FF\">add_action( 'save_post', function ( $post_id, $post ) {</span>\n<span style=\"color: #D8DEE9FF\">\tif ( isset( $_GET['meta-box-loader'] ) ) {</span>\n<span style=\"color: #D8DEE9FF\">\t\t$autosave = wp_get_post_autosave( $post_id );</span>\n<span style=\"color: #D8DEE9FF\">\t\tif ( $autosave ) {</span>\n<span style=\"color: #D8DEE9FF\">\t\t\t$filter = function ( $data ) use ( </span><span style=\"color: #D8DEE9\">&#x26;</span><span style=\"color: #D8DEE9FF\">$filter, $post ) {</span>\n<span style=\"color: #D8DEE9FF\">\t\t\t\tremove_filter( 'wp_insert_post_data', $filter );</span>\n<span style=\"color: #D8DEE9FF\">\t\t\t\t$data[\"post_modified\"]     = gmdate( 'Y-m-d H:i:s', strtotime( $post->post_modified ) + 1 );</span>\n<span style=\"color: #D8DEE9FF\">\t\t\t\t$data[\"post_modified_gmt\"] = gmdate( 'Y-m-d H:i:s', strtotime( $post->post_modified_gmt ) + 1 );</span>\n\n<span style=\"color: #D8DEE9FF\">\t\t\t\treturn $data;</span>\n<span style=\"color: #D8DEE9FF\">\t\t\t};</span>\n<span style=\"color: #D8DEE9FF\">\t\t\tadd_filter( 'wp_insert_post_data', $filter );</span>\n<span style=\"color: #D8DEE9FF\">\t\t\twp_update_post( $autosave );</span>\n<span style=\"color: #D8DEE9FF\">\t\t}</span>\n<span style=\"color: #D8DEE9FF\">\t}</span>\n<span style=\"color: #D8DEE9FF\">}, 10, 2 );</span></code></pre>\n\n<p>元の記事の更新日時に＋１秒して保存します。</p>\n\n<h2 id=\"201949-追記\">2019/4/9 追記<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#201949-追記\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h2>\n\n<div class=\"blog-card\"><iframe src=\"https://blog-card-ten.vercel.app/card/https%3A%2F%2Fgithub.com%2FWordPress%2Fgutenberg%2Fpull%2F14877?id=blog-card-l83r3o2s3t&#x26;referrer=https%3A%2F%2Ftechnote.space%2Fposts%2Fwpxml-fix-gutenberg-preview%2F\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" data-id=\"blog-card-l83r3o2s3t\"></iframe></div>\n\n<p>クラシックエディタではプレビュー時にメタボックスを保存していなかったため、Gutenbergもそれに合わせてプレビュー時の保存をやめることで対応するとのことです。</p>\n\n<p>一方でレビュワーはクラシックエディタでは保存していたと言っています。<br>にもかかわらず承認しているのはメタボックスよりも本文が反映されないことのほうが重要なので妥協した感じでしょうか</p>\n\n<p>そもそもメタボックスの保存によってプレビューの時点で投稿が更新されてしまう動作自体も不自然であり長年議論されていたようです。</p>\n\n<div class=\"blog-card\"><iframe src=\"https://blog-card-ten.vercel.app/card/https%3A%2F%2Fcore.trac.wordpress.org%2Fticket%2F20564?id=blog-card-qel5o38o9u&#x26;referrer=https%3A%2F%2Ftechnote.space%2Fposts%2Fwpxml-fix-gutenberg-preview%2F\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" data-id=\"blog-card-qel5o38o9u\"></iframe></div>\n\n<h2 id=\"2019417-追記\">2019/4/17 追記<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#2019417-追記\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h2>\n\n<p>Gutenbergプラグイン v5.5 で修正済みです。</p>\n\n<div class=\"blog-card\"><iframe src=\"https://blog-card-ten.vercel.app/card/https%3A%2F%2Fgithub.com%2FWordPress%2Fgutenberg%2Fpull%2F15012?id=blog-card-cnhfb7tj6l&#x26;referrer=https%3A%2F%2Ftechnote.space%2Fposts%2Fwpxml-fix-gutenberg-preview%2F\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" data-id=\"blog-card-cnhfb7tj6l\"></iframe></div>\n\n<p>プレビュー時のメタデータの保存は今後再度実装予定のようです。</p>\n\n<div class=\"blog-card\"><iframe src=\"https://blog-card-ten.vercel.app/card/https%3A%2F%2Fgithub.com%2FWordPress%2Fgutenberg%2Fissues%2F14900?id=blog-card-je38r1cvb4&#x26;referrer=https%3A%2F%2Ftechnote.space%2Fposts%2Fwpxml-fix-gutenberg-preview%2F\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" data-id=\"blog-card-je38r1cvb4\"></iframe></div>\n\n<h2 id=\"201958-追記\">2019/5/8 追記<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#201958-追記\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h2>\n\n<p>WordPress v5.2 で反映されました。</p>\n\n<p>もしこのページにある修正を追加していた場合は戻したほうがよいです。</p>\n\n<h2 id=\"201967-追記\">2019/6/7 追記<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#201967-追記\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h2>\n\n<p>ACFプラグインを使用しているとプレビューが効かないことがあるようです。</p>\n\n<div class=\"blog-card\"><iframe src=\"https://blog-card-ten.vercel.app/card/https%3A%2F%2Fgithub.com%2FWordPress%2Fgutenberg%2Fissues%2F16006?id=blog-card-daqvjc1e73&#x26;referrer=https%3A%2F%2Ftechnote.space%2Fposts%2Fwpxml-fix-gutenberg-preview%2F\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" data-id=\"blog-card-daqvjc1e73\"></iframe></div>\n\n<p>いまだにちらほらと効かないという報告があるようです。</p>\n\n<div class=\"blog-card\"><iframe src=\"https://blog-card-ten.vercel.app/card/https%3A%2F%2Fgithub.com%2FWordPress%2Fgutenberg%2Fissues%2F12617?id=blog-card-hak83gd6c7&#x26;referrer=https%3A%2F%2Ftechnote.space%2Fposts%2Fwpxml-fix-gutenberg-preview%2F\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" data-id=\"blog-card-hak83gd6c7\"></iframe></div>\n\n<p>もし発生条件などがわかる場合は報告することで修正の手助けになるので、ぜひIssueから報告してください。</p>\n<!-- /wp:paragraph --></body></html>","excerpt":"メタボックス を使用している場合 かつ 公開後の投稿の場合、変更した内容がプレビューで反映されない場合があります。 すでにIssueとして挙がっているので今後本体側で修正される可能性が高いですが、それまでは自分で修正する必要があります。 解...","postType":"post","tags":[{"slug":"gutenberg","name":"Gutenberg"},{"slug":"%e4%b8%8d%e5%85%b7%e5%90%88","name":"不具合"}],"thumbnail":"https://technote.space/uploads/2018/12/banner-772x250.jpg","dominantColor":"rgba(111,111,111,1)","createdAt":"2019-04-06T18:06:53.000Z","updatedAt":null},"prev":null,"next":{"id":"markdown-2021-09-27-test-toc","title":"目次の動作テスト","excerpt":"目次の動作テスト 見出し２のテスト１  これは１つめの見出し２です。  見出し２のテスト２  これは２つめの見出し２です。  見出し３のテスト１  これは１つめの見出し３です。  見出し３のテスト２  これは２つめの見出し３です。  見出し...","postType":"post","thumbnail":"/images/pet_cat_oddeye_black.png","createdAt":"2021-09-26T15:00:00.000Z","updatedAt":"2021-11-06T15:00:00.000Z"},"headerPages":[],"footerPages":[{"label":"About","url":"/pages/wpxml-about/"},{"label":"プライバシーポリシー","url":"/pages/wpxml-privacy-policy/"},{"label":"お問い合わせ","url":"/pages/wpxml-contact/"}]},"__N_SSG":true}