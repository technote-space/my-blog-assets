{"pageProps":{"post":{"id":"wpxml-travis-ci-env","title":"Travis CI の環境変数の出力例","content":"<html><head></head><body><div class=\"toc-wrapper\"><input type=\"checkbox\" class=\"toc-checkbox\" id=\"toc-checkbox-isshomtcb8\" checked><label class=\"toc-title\" for=\"toc-checkbox-isshomtcb8\">目次</label><nav class=\"toc\"><ol class=\"toc-level toc-level-1\"><li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#動作確認用のリポジトリ\">動作確認用のリポジトリ</a></li><li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#プルリクエスト\">プルリクエスト</a></li><li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#タグプッシュ\">タグプッシュ</a></li></ol></nav></div><p>使用可能な環境変数は<a href=\"https://docs.travis-ci.com/user/environment-variables/\" target=\"_blank\" rel=\"noreferrer noopener\">こちらのページ</a>にあります。</p>\n\n<p>ただ、どのような情報が入っているかがあまりわからなかったため、実際に動かして確認してみました。</p>\n\n<h2 id=\"動作確認用のリポジトリ\">動作確認用のリポジトリ<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#動作確認用のリポジトリ\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h2>\n\n<div class=\"blog-card\"><iframe src=\"https://blog-card-ten.vercel.app/card/https%3A%2F%2Fgithub.com%2Ftechnote-space%2Ftest-travis?id=blog-card-78hfoas4qp&#x26;referrer=https%3A%2F%2Ftechnote.space%2Fposts%2Fwpxml-travis-ci-env%2F\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" data-id=\"blog-card-78hfoas4qp\"></iframe></div>\n\n<p>masterへのマージとタブプッシュ時のみを対象としています。</p>\n\n<pre class=\"wp-block-code\" style=\"background: #2e3440\"><code style=\"color: undefined\">branches:\n  only:\n    - master\n    - \"/^v[0-9\\\\.]+/\"</code></pre>\n\n<h2 id=\"プルリクエスト\">プルリクエスト<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#プルリクエスト\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h2>\n\n<table class=\"wp-block-table\"><tbody><tr><td>key</td><td>value</td></tr><tr><td>TRAVIS_EVENT_TYPE</td><td>pull_request</td></tr><tr><td>TRAVIS_COMMIT</td><td>ae43b97cb78e4b7988684b444a3f1880f4cdc5de</td></tr><tr><td>TRAVIS_COMMIT_RANGE</td><td>98c6cb9044e332a8125cc19c15270730b9407666…2427efedd03d1ced6f51e6e2a76e4f23da42c124</td></tr><tr><td>TRAVIS_PULL_REQUEST</td><td>27</td></tr><tr><td>TRAVIS_PULL_REQUEST_BRANCH</td><td>release/v0.0.14</td></tr><tr><td>TRAVIS_PULL_REQUEST_SHA</td><td>2427efedd03d1ced6f51e6e2a76e4f23da42c124</td></tr><tr><td>TRAVIS_PULL_REQUEST_SLUG</td><td>technote-space/test-travis</td></tr><tr><td>TRAVIS_REPO_SLUG</td><td>technote-space/test-travis</td></tr><tr><td>TRAVIS_TAG</td><td></td></tr></tbody></table>\n\n<p>masterへのプルリクの時です。</p>\n\n<h2 id=\"タグプッシュ\">タグプッシュ<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#タグプッシュ\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h2>\n\n<table class=\"wp-block-table\"><tbody><tr><td>key</td><td>value</td></tr><tr><td>TRAVIS_EVENT_TYPE</td><td>push</td></tr><tr><td>TRAVIS_COMMIT</td><td>3562de9689b70ce79c6d5cb93f30e36fc4bb6ce9</td></tr><tr><td>TRAVIS_COMMIT_RANGE</td><td></td></tr><tr><td>TRAVIS_PULL_REQUEST</td><td>false</td></tr><tr><td>TRAVIS_PULL_REQUEST_BRANCH</td><td></td></tr><tr><td>TRAVIS_PULL_REQUEST_SHA</td><td></td></tr><tr><td>TRAVIS_PULL_REQUEST_SLUG</td><td></td></tr><tr><td>TRAVIS_REPO_SLUG</td><td>technote-space/test-travis</td></tr><tr><td>TRAVIS_TAG</td><td>v0.0.14</td></tr></tbody></table>\n\n<p>masterにマージした後にタグをプッシュした時です。</p>\n\n<p>サンプルのリポジトリではこのタイミングで</p>\n\n<ul><li>GitHub release</li><li>WordPressのsvnへのプッシュ</li></ul>\n\n<p>を行います。</p>\n\n<p>タグプッシュ時は取れる情報が少ないため、もしコミットメッセージの情報を増やすためにコミットの履歴等を取得する場合は git コマンドや GitHub API を利用する必要がありそうです。</p>\n<!-- /wp:paragraph --></body></html>","excerpt":"使用可能な環境変数はこちらのページにあります。 ただ、どのような情報が入っているかがあまりわからなかったため、実際に動かして確認してみました。 動作確認用のリポジトリ    masterへのマージとタブプッシュ時のみを対象としています。  ...","postType":"post","tags":[{"slug":"travis-ci","name":"Travis CI"}],"thumbnail":"https://technote.space/uploads/2019/06/TravisCI-Full-Color.png","dominantColor":"rgba(137,121,101,0.3176470588235294)","createdAt":"2019-06-23T12:53:43.000Z","updatedAt":null},"prev":{"id":"wpxml-travis-ci-behavior","title":"Travis CI の挙動まとめ","excerpt":"引っかかった点などのまとめ DEPLOY.PROVIDER = RELEASES で既にリリース済みに対してデプロイを行った場合 deploy.overwrite = true を設定しておくことで上書きしてくれます。  Travis CI...","postType":"post","thumbnail":"https://technote.space/uploads/2019/06/TravisCI-Full-Color.png","createdAt":"2019-06-23T17:22:57.000Z","updatedAt":null},"next":{"id":"wpxml-gutenberg-compatibility","title":"Gutenberg のバージョンごとの互換性について","excerpt":"Gutenberg プラグインのバージョン v5.9 から editor パッケージのいくつかのコンポーネントを使用すると以下のようなメッセージが出るようになりました。 将来的に editor パッケージから除かれるため、 block-ed...","postType":"post","thumbnail":"https://technote.space/uploads/2018/12/banner-772x250.jpg","createdAt":"2019-06-18T14:08:12.000Z","updatedAt":null},"headerPages":[],"footerPages":[{"label":"About","url":"/pages/wpxml-about/"},{"label":"プライバシーポリシー","url":"/pages/wpxml-privacy-policy/"},{"label":"お問い合わせ","url":"/pages/wpxml-contact/"}]},"__N_SSG":true}