{"pageProps":{"post":{"id":"wpxml-register-gutenberg-plugin","title":"Gutenberg にプラグインを登録する","content":"<html><head></head><body><div class=\"toc-wrapper\"><input type=\"checkbox\" class=\"toc-checkbox\" id=\"toc-checkbox-3bses99ggo\" checked><label class=\"toc-title\" for=\"toc-checkbox-3bses99ggo\">目次</label><nav class=\"toc\"><ol class=\"toc-level toc-level-1\"><li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#registerplugin\">registerPlugin</a></li><li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#サンプル\">サンプル</a><ol class=\"toc-level toc-level-2\"><li class=\"toc-item toc-item-h3\"><a class=\"toc-link toc-link-h3\" href=\"#javascriptの登録\">JavaScriptの登録</a></li><li class=\"toc-item toc-item-h3\"><a class=\"toc-link toc-link-h3\" href=\"#プラグインの登録\">プラグインの登録</a></li><li class=\"toc-item toc-item-h3\"><a class=\"toc-link toc-link-h3\" href=\"#render-の実装\">render の実装</a></li></ol></li><li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#再び固定できるようにボタンを追加する\">再び固定できるようにボタンを追加する</a></li><li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#まとめ\">まとめ</a></li></ol></nav></div><p>Gutenberg（ブロックエディタ）には<strong>プラグイン</strong>を登録する機能があります。</p>\n\n<p>ここでいう<strong>プラグイン</strong>とは『WP Multibyte Patch』や『Contact Form 7』のような、管理画面からインストールして使うものとは異なり、<span class=\"double-underline\">Gutenbergに独自の機能や表示を追加するためのJavaScriptで記述するプログラム</span>のことを指します。</p>\n\n<h2 id=\"registerplugin\">registerPlugin<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#registerplugin\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h2>\n\n<div class=\"blog-card\"><iframe src=\"https://blog-card-ten.vercel.app/card/https%3A%2F%2Fwordpress.org%2Fgutenberg%2Fhandbook%2Fdesigners-developers%2Fdevelopers%2Fpackages%2Fpackages-plugins%2F%23registerplugin?id=blog-card-qvgsothgcn&#x26;referrer=https%3A%2F%2Ftechnote.space%2Fposts%2Fwpxml-register-gutenberg-plugin%2F\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" data-id=\"blog-card-qvgsothgcn\"></iframe></div>\n\n<p>icon と render を指定できます。</p>\n\n<p>icon はなくてもよいですが render は必ず必要です。</p>\n\n<h2 id=\"サンプル\">サンプル<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#サンプル\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h2>\n\n<p>上部に固定することができ、クリックすると「click!」 と表示されるボタンをもつプラグインを登録してみます。</p>\n\n<figure class=\"wp-block-image\"><a href=\"https://technote.space/uploads/2019/03/03270136.png\"><img src=\"https://technote.space/uploads/2019/03/03270136.png\" alt=\"\" class=\"wp-image-1297\"></a></figure>\n\n<h3 id=\"javascriptの登録\">JavaScriptの登録<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#javascriptの登録\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h3>\n\n<p>エディタで実行するためのJavaScriptをPHP側で登録します。</p>\n\n<p>テーマの functions.php や 独自のプラグインを作成し次のようなプログラムを追加します。</p>\n\n<p><em>functions.php</em></p>\n\n<pre class=\"language-php\" style=\"background: #2e3440\"><code class=\"language-php\"><span style=\"color: #D8DEE9FF\">add_action( 'enqueue_block_editor_assets', function () {</span>\n<span style=\"color: #D8DEE9FF\">   wp_enqueue_script( 'my_plugin', plugins_url( 'assets/js/gutenberg.js', __FILE__ ), [</span>\n<span style=\"color: #D8DEE9FF\">      'wp-element',</span>\n<span style=\"color: #D8DEE9FF\">      'wp-edit-post',</span>\n<span style=\"color: #D8DEE9FF\">      'wp-components',</span>\n<span style=\"color: #D8DEE9FF\">      'wp-data',</span>\n<span style=\"color: #D8DEE9FF\">      'wp-plugins',</span>\n<span style=\"color: #D8DEE9FF\">   ] );</span>\n<span style=\"color: #D8DEE9FF\">} );</span></code></pre>\n\n<h3 id=\"プラグインの登録\">プラグインの登録<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#プラグインの登録\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h3>\n\n<p>上で登録したJavaScriptに処理を書いていきます。</p>\n\n<p><em>gutenberg.js</em></p>\n\n<pre class=\"language-js\" style=\"background: #2e3440\"><code class=\"language-js\"><span style=\"color: #81A1C1\">const</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">Fragment</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">wp</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">element</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #81A1C1\">const</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">registerPlugin</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">wp</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9FF\">plugins</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">registerPlugin</span><span style=\"color: #81A1C1\">;</span>\n\n<span style=\"color: #88C0D0\">registerPlugin</span><span style=\"color: #D8DEE9FF\">( </span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #A3BE8C\">my-plugin</span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">\t</span><span style=\"color: #88C0D0\">render</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">()</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=></span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">\t\t</span><span style=\"color: #81A1C1\">return</span><span style=\"color: #D8DEE9FF\"> (</span>\n<span style=\"color: #D8DEE9FF\">\t\t\t</span><span style=\"color: #81A1C1\">&#x3C;Fragment/></span>\n<span style=\"color: #D8DEE9FF\">\t\t)</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9FF\">\t</span><span style=\"color: #ECEFF4\">},</span>\n<span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\"> )</span><span style=\"color: #81A1C1\">;</span></code></pre>\n\n<p>これで登録自体は完了です。ビルドして実行してみてください。</p>\n\n<p>ただし、まだ描画する要素を実装していないためなにも変化はありません。</p>\n\n<h3 id=\"render-の実装\">render の実装<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#render-の実装\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h3>\n\n<p>利用できる要素はいくつかあります。</p>\n\n<ul><li>PluginBlockSettingsMenuItem</li><li>PluginMoreMenuItem</li><li>PluginPostPublishPanel</li><li>PluginPostStatusInfo</li><li>PluginPrePublishPanel</li><li>PluginSidebar</li><li>PluginSidebarMoreMenuItem</li></ul>\n\n<div class=\"blog-card\"><iframe src=\"https://blog-card-ten.vercel.app/card/https%3A%2F%2Fgithub.com%2FWordPress%2Fgutenberg%2Fblob%2Fmaster%2Fpackages%2Fedit-post%2FREADME.md%23api?id=blog-card-glsmv0qu9h&#x26;referrer=https%3A%2F%2Ftechnote.space%2Fposts%2Fwpxml-register-gutenberg-plugin%2F\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" data-id=\"blog-card-glsmv0qu9h\"></iframe></div>\n\n<p>今回は <em>PluginSidebar </em> でサイドバーを追加します。</p>\n\n<p>他の要素がどこにどう表示されるかに関しては以下の記事を参考にしてください。</p>\n\n<figure class=\"wp-block-embed is-type-rich is-provider-technote\"><div class=\"wp-block-embed__wrapper\">\n<div class=\"blog-card\"><iframe src=\"https://blog-card-ten.vercel.app/card/https%3A%2F%2Ftechnote.space%2Fwordpress%2Fslot-fill?id=blog-card-afopefhks7&#x26;referrer=https%3A%2F%2Ftechnote.space%2Fposts%2Fwpxml-register-gutenberg-plugin%2F\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" data-id=\"blog-card-afopefhks7\"></iframe></div>\n</div></figure>\n\n<p>先ほどは <em>&#x3C;Fragment/></em> としか書かなかった箇所を修正します。</p>\n\n<p><em>gutenberg.js</em></p>\n\n<pre class=\"language-js\" style=\"background: #2e3440\"><code class=\"language-js\"><span style=\"color: #81A1C1\">const</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">Fragment</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">wp</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">element</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #81A1C1\">const</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">PluginSidebar</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">wp</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">editPost</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #81A1C1\">const</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">IconButton</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">PanelBody</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">wp</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9FF\">components</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #81A1C1\">const</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">registerPlugin</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">wp</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9FF\">plugins</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">registerPlugin</span><span style=\"color: #81A1C1\">;</span>\n\n<span style=\"color: #88C0D0\">registerPlugin</span><span style=\"color: #D8DEE9FF\">( </span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #A3BE8C\">my-plugin</span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">\t</span><span style=\"color: #88C0D0\">render</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">()</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=></span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">\t\t</span><span style=\"color: #81A1C1\">return</span><span style=\"color: #D8DEE9FF\"> (</span>\n<span style=\"color: #D8DEE9FF\">\t\t\t</span><span style=\"color: #81A1C1\">&#x3C;Fragment></span>\n<span style=\"color: #D8DEE9FF\">\t\t\t\t</span><span style=\"color: #81A1C1\">&#x3C;PluginSidebar</span>\n<span style=\"color: #D8DEE9FF\">\t\t\t\t\t</span><span style=\"color: #8FBCBB\">name</span><span style=\"color: #81A1C1\">=</span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #A3BE8C\">test</span><span style=\"color: #ECEFF4\">'</span>\n<span style=\"color: #D8DEE9FF\">\t\t\t\t\t</span><span style=\"color: #8FBCBB\">icon</span><span style=\"color: #81A1C1\">=</span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #A3BE8C\">carrot</span><span style=\"color: #ECEFF4\">'</span>\n<span style=\"color: #D8DEE9FF\">\t\t\t\t\t</span><span style=\"color: #8FBCBB\">title</span><span style=\"color: #81A1C1\">=</span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #A3BE8C\">追加テスト</span><span style=\"color: #ECEFF4\">'</span>\n<span style=\"color: #D8DEE9FF\">\t\t\t\t</span><span style=\"color: #81A1C1\">></span>\n<span style=\"color: #D8DEE9FF\">\t\t\t\t\t</span><span style=\"color: #81A1C1\">&#x3C;PanelBody</span>\n<span style=\"color: #D8DEE9FF\">\t\t\t\t\t\t</span><span style=\"color: #8FBCBB\">title</span><span style=\"color: #81A1C1\">=</span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #A3BE8C\">追加テストのパネル</span><span style=\"color: #ECEFF4\">'</span>\n<span style=\"color: #D8DEE9FF\">\t\t\t\t\t\t</span><span style=\"color: #8FBCBB\">initialOpen</span><span style=\"color: #81A1C1\">={</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">true</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">}</span>\n<span style=\"color: #D8DEE9FF\">\t\t\t\t\t</span><span style=\"color: #81A1C1\">></span>\n<span style=\"color: #D8DEE9FF\">\t\t\t\t\t\t</span><span style=\"color: #81A1C1\">&#x3C;IconButton</span>\n<span style=\"color: #D8DEE9FF\">\t\t\t\t\t\t\t</span><span style=\"color: #8FBCBB\">icon</span><span style=\"color: #81A1C1\">=</span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #A3BE8C\">admin-post</span><span style=\"color: #ECEFF4\">'</span>\n<span style=\"color: #D8DEE9FF\">\t\t\t\t\t\t\t</span><span style=\"color: #8FBCBB\">onClick</span><span style=\"color: #81A1C1\">={</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">()</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=></span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span>\n<span style=\"color: #D8DEE9FF\">\t\t\t\t\t\t\t\t</span><span style=\"color: #88C0D0\">alert</span><span style=\"color: #D8DEE9FF\">( </span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #A3BE8C\">click!</span><span style=\"color: #ECEFF4\">'</span><span style=\"color: #D8DEE9FF\"> )</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9FF\">\t\t\t\t\t\t\t</span><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">}</span>\n<span style=\"color: #D8DEE9FF\">\t\t\t\t\t\t</span><span style=\"color: #81A1C1\">/></span>\n<span style=\"color: #D8DEE9FF\">\t\t\t\t\t</span><span style=\"color: #81A1C1\">&#x3C;/PanelBody></span>\n<span style=\"color: #D8DEE9FF\">\t\t\t\t</span><span style=\"color: #81A1C1\">&#x3C;/PluginSidebar></span>\n<span style=\"color: #D8DEE9FF\">\t\t\t</span><span style=\"color: #81A1C1\">&#x3C;/Fragment></span>\n<span style=\"color: #D8DEE9FF\">\t\t)</span><span style=\"color: #81A1C1\">;</span>\n<span style=\"color: #D8DEE9FF\">\t</span><span style=\"color: #ECEFF4\">},</span>\n<span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\"> )</span><span style=\"color: #81A1C1\">;</span></code></pre>\n\n<p>ここまでで次のようなボタンとパネルが追加されます。</p>\n\n<figure class=\"wp-block-image\"><a href=\"https://technote.space/uploads/2019/03/03270158.gif\"><img src=\"https://technote.space/uploads/2019/03/03270158.gif\" alt=\"\" class=\"wp-image-1300\"></a></figure>\n\n<p>\n\n星のボタンで固定が解除されます。\n\n</p>\n\n<figure class=\"wp-block-image\"><img src=\"https://technote.space/uploads/2019/03/03270141.png\" alt=\"\" class=\"wp-image-1299\"></figure>\n\n<p>そのままパネルを閉じると再び固定させる方法が今のところありません。</p>\n\n<h2 id=\"再び固定できるようにボタンを追加する\">再び固定できるようにボタンを追加する<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#再び固定できるようにボタンを追加する\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h2>\n\n<p>もう少しプログラムを追加して再度固定できるようにしてみます。</p>\n\n<p>固定されているかどうかの状態の取得及び変更は『core/edit-post』の store を通して行うことができます。</p>\n\n<div class=\"blog-card\"><iframe src=\"https://blog-card-ten.vercel.app/card/https%3A%2F%2Fgithub.com%2FWordPress%2Fgutenberg%2Fblob%2Fmaster%2Fpackages%2Fedit-post%2Fsrc%2Fstore%2Fselectors.js%23L178?id=blog-card-humqg4ghro&#x26;referrer=https%3A%2F%2Ftechnote.space%2Fposts%2Fwpxml-register-gutenberg-plugin%2F\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" data-id=\"blog-card-humqg4ghro\"></iframe></div>\n\n<div class=\"blog-card\"><iframe src=\"https://blog-card-ten.vercel.app/card/https%3A%2F%2Fgithub.com%2FWordPress%2Fgutenberg%2Fblob%2Fmaster%2Fpackages%2Fedit-post%2Fsrc%2Fstore%2Factions.js%23L161?id=blog-card-ct79l68h0i&#x26;referrer=https%3A%2F%2Ftechnote.space%2Fposts%2Fwpxml-register-gutenberg-plugin%2F\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" data-id=\"blog-card-ct79l68h0i\"></iframe></div>\n\n<p>固定されていないときにだけ <em>PluginMoreMenuItem </em>を使用してボタンを表示させます。</p>\n\n<p><em>gutenberg.js</em></p>\n\n<pre class=\"wp-block-code\" style=\"background: #2e3440\"><code style=\"color: undefined\">registerPlugin( 'my-plugin', {\n\trender: () => {\n\t\treturn (\n\t\t\t&#x3C;Fragment>\n\t\t\t\t&#x3C;PluginSidebar\n\t\t\t\t\tname='test'\n\t\t\t\t\ticon='carrot'\n\t\t\t\t\ttitle='追加テスト'\n\t\t\t\t>\n\t\t\t\t\t&#x3C;PanelBody\n\t\t\t\t\t\ttitle='追加テストのパネル'\n\t\t\t\t\t\tinitialOpen={ true }\n\t\t\t\t\t>\n\t\t\t\t\t\t&#x3C;IconButton\n\t\t\t\t\t\t\ticon='admin-post'\n\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\talert( 'click!' );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>\n\t\t\t\t\t&#x3C;/PanelBody>\n\t\t\t\t&#x3C;/PluginSidebar>\n\t\t\t\t{ ! select( 'core/edit-post' ).isPluginItemPinned( 'my-plugin/test' ) &#x26;&#x26; &#x3C;PluginMoreMenuItem\n\t\t\t\t\ticon=\"carrot\"\n\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\tdispatch( 'core/edit-post' ).togglePinnedPluginItem( 'my-plugin/test' );\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t再び表示\n\t\t\t\t&#x3C;/PluginMoreMenuItem> }\n\t\t\t&#x3C;/Fragment>\n\t\t);\n\t},\n} );</code></pre>\n\n<p>再度固定させることができました。</p>\n\n<figure class=\"wp-block-image\"><a href=\"https://technote.space/uploads/2019/03/03270209.gif\"><img src=\"https://technote.space/uploads/2019/03/03270209.gif\" alt=\"\" class=\"wp-image-1301\"></a></figure>\n\n<h2 id=\"まとめ\">まとめ<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#まとめ\"><svg class=\"icon icon-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" aria-labelledby=\"paperclipIconTitle\" stroke=\"#2329EE\" stroke-width=\"1\" stroke-linecap=\"square\" stroke-linejoin=\"miter\" fill=\"none\" color=\"#131996\"><path d=\"M7.93517339,13.7795989 L15.1617306,6.55304173 C16.03921,5.67631227 17.4656766,5.67631227 18.343156,6.55304173 C19.2206355,7.43052116 19.2206355,8.85773771 18.343156,9.73521714 L8.40091248,19.5477137 C6.93619681,21.0124294 4.56325242,21.0124294 3.09853675,19.5477137 C1.63382108,18.083748 1.63382108,15.7093037 3.09853675,14.245338 L12.9335328,4.53783896 C14.9839848,2.48738701 18.3094068,2.48738701 20.3568588,4.53783896 C22.4088107,6.58904088 22.4088107,9.91146301 20.3583588,11.961915 L13.2390491,19.0819746\"></path></svg></a></h2>\n\n<p>Gutenbergのプラグインを使えばエディタ自体を拡張することが可能です。</p>\n\n<p>使い方次第でもっとGutenbergが使いやすくなる気がします。</p>\n<!-- /wp:paragraph --></body></html>","excerpt":"Gutenberg（ブロックエディタ）にはプラグインを登録する機能があります。 ここでいうプラグインとは『WP Multibyte Patch』や『Contact Form 7』のような、管理画面からインストールして使うものとは異なり、Gu...","postType":"post","tags":[{"slug":"gutenberg","name":"Gutenberg"},{"slug":"%e3%83%97%e3%83%a9%e3%82%b0%e3%82%a4%e3%83%b3","name":"プラグイン"}],"thumbnail":"https://technote.space/uploads/2018/12/banner-772x250.jpg","dominantColor":"rgba(111,111,111,1)","createdAt":"2019-03-26T17:14:19.000Z","updatedAt":null},"prev":{"id":"wpxml-find-gutenberg-source-code","title":"Gutenbergの実装箇所を素早く見つけて開発をはかどらせる","excerpt":"公式のハンドブックやいろいろな開発者によるブログ記事なども充実してきましたが、一番確実なのは実装コードを実際に見てみることです。 ただ、Gutenbergのコードは量が多く、慣れないと目的の実装箇所を見つけるのに時間がかかってしまうことでし...","postType":"post","thumbnail":"https://technote.space/uploads/2018/12/banner-772x250.jpg","createdAt":"2019-03-26T19:06:03.000Z","updatedAt":null},"next":{"id":"wpxml-slot-fill","title":"Gutenbergの Slot と Fill を理解する","excerpt":"Gutenberg（ブロックエディタ）の開発において Slot と Fill の理解は重要です。 * RichTextToolbarButton で追加したものがリッチテキストのツールバーに表示される * InspectorControls...","postType":"post","thumbnail":"https://technote.space/uploads/2018/12/banner-772x250.jpg","createdAt":"2019-03-26T09:48:56.000Z","updatedAt":null},"headerPages":[],"footerPages":[{"label":"About","url":"/pages/wpxml-about/"},{"label":"プライバシーポリシー","url":"/pages/wpxml-privacy-policy/"},{"label":"お問い合わせ","url":"/pages/wpxml-contact/"}]},"__N_SSG":true}